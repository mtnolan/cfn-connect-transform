{"modules":[{"id":"c6fbdd06-16cd-46d9-ab65-4e8d2d60bab8","type":"SetRecordingBehavior","branches":[{"condition":"Success","transition":"e4e19cd2-58c2-4968-90af-d5211f9165da"}],"parameters":[{"name":"RecordingBehaviorOption","value":"Enable"},{"name":"RecordingParticipantOption","value":"Both"},{"name":"AnalyticsBehaviorOption","value":"Enable"},{"name":"AnalyticsLanguageLocaleCode","value":"en-US","namespace":null},{"name":"AnalyticsCustomVocabulary","value":"None"},{"name":"AnalyticsRedactionOption","value":"Enable"},{"name":"AnalyticsRedactionPolicy","value":"RedactedAndOriginal","namespace":null},{"name":"AnalyticsMode","value":"RealTime"}],"metadata":{"position":{"x":33,"y":741}}},{"id":"564d509c-f449-44a2-a6f5-fa7bc7cbfd14","type":"Disconnect","branches":[],"parameters":[],"metadata":{"position":{"x":2878,"y":370}}},{"id":"52267d18-327f-47b5-aac2-e3db0daa0be7","type":"SetQueue","branches":[{"condition":"Success","transition":"c6fbdd06-16cd-46d9-ab65-4e8d2d60bab8"},{"condition":"Error","transition":"c6fbdd06-16cd-46d9-ab65-4e8d2d60bab8"}],"parameters":[{"name":"Queue","value":"arn:aws:connect:us-east-1:965860198742:instance/f63f3b23-02ef-421a-b291-f91bd7dda8fb/queue/3cf0eee5-137f-41ab-9e7e-9cbb85d2f621","namespace":null,"resourceName":"BasicQueue"}],"metadata":{"position":{"x":33,"y":554},"useDynamic":false,"queue":{"id":"arn:aws:connect:us-east-1:965860198742:instance/f63f3b23-02ef-421a-b291-f91bd7dda8fb/queue/3cf0eee5-137f-41ab-9e7e-9cbb85d2f621","text":"BasicQueue"}}},{"id":"0ed2031b-ca05-4b81-9024-2ad9e1a7301e","type":"SetLoggingBehavior","branches":[{"condition":"Success","transition":"af6f562e-8086-42e3-aa92-b0cf0b586775"}],"parameters":[{"name":"LoggingBehavior","value":"Enable"}],"metadata":{"position":{"x":33,"y":200}}},{"id":"af6f562e-8086-42e3-aa92-b0cf0b586775","type":"SetAttributes","branches":[{"condition":"Success","transition":"52267d18-327f-47b5-aac2-e3db0daa0be7"},{"condition":"Error","transition":"52267d18-327f-47b5-aac2-e3db0daa0be7"}],"parameters":[{"name":"Attribute","value":"true","key":"contactLensImportEnabled","namespace":null},{"name":"Attribute","value":"true","key":"postcallRedactedRecordingImportEnabled","namespace":null},{"name":"Attribute","value":"true","key":"postcallRecordingImportEnabled","namespace":null},{"name":"Attribute","value":"dl,kw,syn","key":"postcallTranscribeComprehendAnalysis","namespace":null}],"metadata":{"position":{"x":34,"y":350}}},{"id":"a15df72b-d201-4f40-be39-8483ade1380b","type":"SetAttributes","branches":[{"condition":"Success","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"},{"condition":"Error","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"Attribute","value":"tempCaseNumber","key":"caseNumber","namespace":"User Defined"},{"name":"Attribute","value":"Case Followup","key":"CallReason","namespace":null}],"metadata":{"position":{"x":2177,"y":582}}},{"id":"e8c1fa07-f31e-48dd-a857-cfe3060321db","type":"PlayPrompt","branches":[{"condition":"Success","transition":"5d641cd2-b988-413d-b212-f714b6514cab"}],"parameters":[{"name":"Text","value":"Your next payment due is $.External.paymentDue.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2203,"y":1241},"useDynamic":false}},{"id":"a74eea8c-c7d3-4628-90bc-ac6c055dfc43","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"e8c1fa07-f31e-48dd-a857-cfe3060321db"},{"condition":"Error","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"}],"parameters":[{"name":"FunctionArn","value":"$$GetLoan$$","namespace":null},{"name":"TimeLimit","value":"3"}],"metadata":{"position":{"x":1823,"y":1254},"dynamicMetadata":{},"useDynamic":false},"target":"Lambda"},{"id":"4c8d49ba-7fd4-403b-80d6-9ee1c22b9d68","type":"PlayPrompt","branches":[{"condition":"Success","transition":"a15df72b-d201-4f40-be39-8483ade1380b"}],"parameters":[{"name":"Text","value":"Great!  I'll let the agent know so they can better assist you!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":1900,"y":586},"useDynamic":false}},{"id":"a14d9520-9ab5-446c-bc52-574f0ef9b1b6","type":"GetUserInput","branches":[{"condition":"NoMatch","transition":"31ef1e55-2bbf-4876-921c-bdfab45856fa"},{"condition":"Error","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"Text","value":"<speak>Are you calling about your open case with the subject <break strength=\"weak\"/><prosody rate=\"slow\" volume=\"x-loud\">$.Attributes.tempCaseSubject?</prosody>\n</speak>","namespace":null},{"name":"TextToSpeechType","value":"ssml"},{"name":"BotName","value":"QuestionBot"},{"name":"BotAlias","value":"dev"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1225,"y":775},"conditionMetadata":[],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"31ef1e55-2bbf-4876-921c-bdfab45856fa","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Yes","transition":"4c8d49ba-7fd4-403b-80d6-9ee1c22b9d68"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"No","transition":"5d641cd2-b988-413d-b212-f714b6514cab"},{"condition":"NoMatch","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"}],"parameters":[{"name":"Attribute","value":"response"},{"name":"Namespace","value":"Lex.Slots"}],"metadata":{"position":{"x":1610,"y":608},"conditionMetadata":[{"id":"36f719f4-0951-4660-9a90-4ba54afbf050","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"Yes"},{"id":"e2440c26-64a8-45f2-a390-b83079f6d35a","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"No"}]}},{"id":"b8c750a5-8052-41af-88ca-0d95b54a7720","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"a14d9520-9ab5-446c-bc52-574f0ef9b1b6"},{"condition":"Error","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"FunctionArn","value":"$$LexPrimer$$","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"lexBot","value":"QuestionBot","namespace":null},{"name":"Parameter","key":"utterance","value":"This is an utterance that will never be said zebra yes no","namespace":null},{"name":"Parameter","key":"lexAlias","value":"dev","namespace":null}],"metadata":{"position":{"x":970,"y":773},"dynamicMetadata":{"lexBot":false,"utterance":false,"lexAlias":false},"useDynamic":false},"target":"Lambda"},{"id":"e78b7d08-9092-456c-a708-406aa34ea7a9","type":"SetAttributes","branches":[{"condition":"Success","transition":"b8c750a5-8052-41af-88ca-0d95b54a7720"},{"condition":"Error","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"Attribute","value":"$.External.Id","key":"tempCaseNumber","namespace":null},{"name":"Attribute","value":"$.External.Subject","key":"tempCaseSubject","namespace":null}],"metadata":{"position":{"x":691,"y":771}}},{"id":"02b0b06a-f691-4874-9ddd-6cce44460c05","type":"SetAttributes","branches":[{"condition":"Success","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"},{"condition":"Error","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"}],"parameters":[{"name":"Attribute","value":"Forberance","key":"CallReason","namespace":null}],"metadata":{"position":{"x":1873,"y":874}}},{"id":"a986af27-c8a6-4ace-bb95-e3256342b083","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"Text","value":"Ok - I'll transfer you to an agent to help with your new issue.","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":2266,"y":983},"useDynamic":false}},{"id":"5d641cd2-b988-413d-b212-f714b6514cab","type":"GetUserInput","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Forberance","transition":"02b0b06a-f691-4874-9ddd-6cce44460c05"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"Mortgage","transition":"5285608e-72eb-4646-8f75-cc01b20bdca4"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"PaymentDue","transition":"a74eea8c-c7d3-4628-90bc-ac6c055dfc43"},{"condition":"NoMatch","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"},{"condition":"Error","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"}],"parameters":[{"name":"Text","value":"How can I help you today?","namespace":null},{"name":"TextToSpeechType","value":"text"},{"name":"BotName","value":"BankBot"},{"name":"BotAlias","value":"dev"},{"name":"BotRegion","value":"us-east-1"}],"metadata":{"position":{"x":1479,"y":1086},"conditionMetadata":[{"id":"7740a0e6-5a8d-4ec8-af85-a767eea66a38","value":"Forberance"},{"id":"78cbcffa-8019-4d53-a044-27e4a490c8fb","value":"Mortgage"},{"id":"bdc42c8f-8058-421f-aa9d-c00c2fea54fa","value":"PaymentDue"}],"useDynamic":false,"dynamicMetadata":{}},"target":"Lex"},{"id":"5285608e-72eb-4646-8f75-cc01b20bdca4","type":"SetAttributes","branches":[{"condition":"Success","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"},{"condition":"Error","transition":"a986af27-c8a6-4ace-bb95-e3256342b083"}],"parameters":[{"name":"Attribute","value":"Mortgage","key":"CallReason","namespace":null}],"metadata":{"position":{"x":1873,"y":1064}}},{"id":"7998b004-688c-4906-9e8e-03fefad28379","type":"PlayPrompt","branches":[{"condition":"Success","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"Text","value":"Hi stranger!  I don't recognize you!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":805,"y":512},"useDynamic":false}},{"id":"e4e19cd2-58c2-4968-90af-d5211f9165da","type":"SetVoice","branches":[{"condition":"Success","transition":"a8de1e31-9439-43f2-a858-219b6ebe5fed"}],"parameters":[{"name":"GlobalVoice","value":"Matthew"}],"metadata":{"position":{"x":52,"y":894},"overrideConsoleVoice":false,"defaultVoice":"Conversational"}},{"id":"a8de1e31-9439-43f2-a858-219b6ebe5fed","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"583820bf-c10f-4992-a4ee-33f731ed971f"},{"condition":"Error","transition":"7998b004-688c-4906-9e8e-03fefad28379"}],"parameters":[{"name":"FunctionArn","value":"$$SFAPI$$","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"sf_operation","value":"phoneLookup","namespace":null},{"name":"Parameter","key":"sf_phone","value":"Customer Number","namespace":"System"},{"name":"Parameter","key":"sf_fields","value":"Id, Name, Email, FirstName","namespace":null}],"metadata":{"position":{"x":310,"y":488},"dynamicMetadata":{"sf_operation":false,"sf_phone":true,"sf_fields":false},"useDynamic":false},"target":"Lambda"},{"id":"583820bf-c10f-4992-a4ee-33f731ed971f","type":"SetAttributes","branches":[{"condition":"Success","transition":"6fd7ff22-3cfb-465d-b470-7bf9a34e9394"},{"condition":"Error","transition":"7998b004-688c-4906-9e8e-03fefad28379"}],"parameters":[{"name":"Attribute","value":"Id","key":"ContactId","namespace":"External"},{"name":"Attribute","value":"FirstName","key":"ContactFirstName","namespace":"External"}],"metadata":{"position":{"x":414,"y":207}}},{"id":"6fd7ff22-3cfb-465d-b470-7bf9a34e9394","type":"PlayPrompt","branches":[{"condition":"Success","transition":"8fb5efbe-836b-42ef-ae52-b1aba1f53c96"}],"parameters":[{"name":"Text","value":"Hi $.Attributes.ContactFirstName!","namespace":null},{"name":"TextToSpeechType","value":"text"}],"metadata":{"position":{"x":422,"y":15},"useDynamic":false}},{"id":"7c1abeb0-7f9b-4a13-af78-833849600c28","type":"CheckAttribute","branches":[{"condition":"Evaluate","conditionType":"Equals","conditionValue":"0","transition":"5d641cd2-b988-413d-b212-f714b6514cab"},{"condition":"Evaluate","conditionType":"Equals","conditionValue":"1","transition":"e78b7d08-9092-456c-a708-406aa34ea7a9"},{"condition":"Evaluate","conditionType":"GreaterThan","conditionValue":"1","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"},{"condition":"NoMatch","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"Attribute","value":"sf_count"},{"name":"Namespace","value":"External"}],"metadata":{"position":{"x":1756,"y":257},"conditionMetadata":[{"id":"9ce343d4-b108-49e2-970e-5ab05682c046","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"0"},{"id":"4ca6245c-2ce4-4efa-8179-82320c42a580","operator":{"name":"Equals","value":"Equals","shortDisplay":"="},"value":"1"},{"id":"236f5f4d-ef6b-495e-bb5c-1438d89de1a9","operator":{"name":"Is greater than","value":"GreaterThan","shortDisplay":">"},"value":"1"}]}},{"id":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2","type":"Transfer","branches":[{"condition":"AtCapacity","transition":"564d509c-f449-44a2-a6f5-fa7bc7cbfd14"},{"condition":"Error","transition":"564d509c-f449-44a2-a6f5-fa7bc7cbfd14"}],"parameters":[],"metadata":{"position":{"x":2624,"y":584},"useDynamic":false,"queue":null},"target":"Queue"},{"id":"8fb5efbe-836b-42ef-ae52-b1aba1f53c96","type":"SetAttributes","branches":[{"condition":"Success","transition":"996cbbda-8a64-4703-a434-93099646078d"},{"condition":"Error","transition":"996cbbda-8a64-4703-a434-93099646078d"}],"parameters":[{"name":"Attribute","value":"true","key":"IsAuthenticated","namespace":null}],"metadata":{"position":{"x":1071,"y":69}}},{"id":"996cbbda-8a64-4703-a434-93099646078d","type":"InvokeExternalResource","branches":[{"condition":"Success","transition":"7c1abeb0-7f9b-4a13-af78-833849600c28"},{"condition":"Error","transition":"c7f11f2a-01e7-4ca4-a6a4-2f4ba11593d2"}],"parameters":[{"name":"FunctionArn","value":"$$SFAPI$$","namespace":null},{"name":"TimeLimit","value":"8"},{"name":"Parameter","key":"sf_operation","value":"lookup","namespace":null},{"name":"Parameter","key":"sf_object","value":"Case","namespace":null},{"name":"Parameter","key":"sf_fields","value":"Id, Status, Subject","namespace":null},{"name":"Parameter","key":"ContactId","value":"$.Attributes.ContactId","namespace":null},{"name":"Parameter","key":"Status","value":"New","namespace":null}],"metadata":{"position":{"x":1392,"y":219},"dynamicMetadata":{"sf_operation":false,"sf_object":false,"sf_fields":false,"ContactId":false,"Status":false},"useDynamic":false},"target":"Lambda"}],"version":"1","type":"contactFlow","start":"0ed2031b-ca05-4b81-9024-2ad9e1a7301e","metadata":{"entryPointPosition":{"x":15,"y":40},"snapToGrid":false,"name":"0.SalesforceDemo","description":null,"type":"contactFlow","status":"published","hash":"1176e5a6770f980de7354bb38b0daf91d01533c731395c8c705ab583c3702b15"}}